[project]
name = "sentence-completion"
description = "Sentence completion using user context"
authors = [{ name = "Arunanshu Biswas", email = "mydellpc07@gmail.com" }]
dependencies = [
    "transformers>=4.42.3",
    "fastapi>=0.111.0",
    "accelerate>=0.32.1",
    "pydantic>=2.8.2",
    "torch>=2.3.1",
    "numpy>=1.26.4",
]
requires-python = ">=3.10"
readme = "README.md"
license = { text = "MIT" }
dynamic = ["version"]

[tool.pdm.dev-dependencies]
dev = ["ruff>=0.5.1"]

[build-system]
requires = ["pdm-backend"]
build-backend = "pdm.backend"

[tool.pdm]
distribution = true

[[tool.pdm.source]]
name = "pytorch"
url = "https://download.pytorch.org/whl/cu121"
verify_ssl = true
include_packages = ["torch*"]

# ================== Other tools =====================
[tool.pdm.version]
source = "scm"
write_to = "sentence_completion/_version.py"
write_template = '''
# auto @generated by PDM

__version__ = "{}"
'''
fallback_version = "0.0.0"  # required when building in docker

[tool.ruff]
# line-length = 80
target-version = "py310"
output-format = 'grouped'

[tool.ruff.lint]
preview = true
extend-select = [
    "A",    # builtins
    "B",    # bugbear
    "S",    # bandit
    "E",    # pycodestyle errors
    "F",    # pyflakes
    "Q",    # quotes
    "W",    # pycodestyle warnings
    "I",    # isort
    "EM",   # errmsgs
    "UP",   # pyupgrade
    "C4",   # comprehensions
    "PT",   # pytest
    "RET",  # return
    "C90",  # mccabe
    "ARG",  # unused arguments
    "TCH",  # type checking
    "SIM",  # flake8-simplify
    "PIE",  # flake8-pie
    "TID",  # tidy imports
    "ICN",  # import conventions
    "RSE",  # flake8-raise
    "FLY",  # flynt
    "RUF",  # ruff specific rules
    "TRY",  # tryceratops
    "PERF", # perflint
    "FURB", # refurb
]
extend-ignore = ["B024", "S101"]

# [tool.ruff.lint.per-file-ignores]
# "tests/*" = ["S101"]

[tool.ruff.lint.isort]
required-imports = ["from __future__ import annotations"]

[tool.ruff.lint.flake8-pytest-style]
fixture-parentheses = false
